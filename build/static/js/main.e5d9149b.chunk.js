(this.webpackJsonpkwitterfrontend=this.webpackJsonpkwitterfrontend||[]).push([[0],{79:function(e,a,t){e.exports=t(91)},84:function(e,a,t){},91:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(73),l=t.n(s),o=(t(84),t(6)),c=t(10),m=t(8),i=t(7),u=t(32),d=t(34);var p=t(93),h=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(){return Object(o.a)(this,t),a.apply(this,arguments)}return t}(r.a.Component);h.ApiBaseURL="http://localhost:8762",h.ApiUrls={AUTH:"/auth",REGISTER:"/user/UserController/register",DELETEUSER:"/user/UserController/deleteUser",CURRENT:"/user/UserController/current",ALLUSERS:"/user/UserController/all",ALLPOSTS:"/post/PostController/all",UPDATEUSERNAME:"/user/UserController/updateUsername",CREATEPOST:"/post/PostController/createpost",POSTBYAUTHOR:"/Post/PostController/postsbyauthor"};var f={login:function(e,a){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:a})};return fetch("".concat(h.ApiBaseURL+h.ApiUrls.AUTH),t).then((function(e){var a=e.headers.get("Authorization");a&&(localStorage.setItem("token",a),f.currentUser.next(!0))}))},logout:function(){f.currentUser.next(!1)},register:function(e,a,t,n,r){var s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:a,email:t,firstName:n,lastName:r})};return fetch("".concat(h.ApiBaseURL+h.ApiUrls.REGISTER),s)},currentUser:new p.a(!1)};var v=localStorage.getItem("token"),E={getAll:function(){var e={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:v}};return fetch("".concat(h.ApiBaseURL+h.ApiUrls.ALLPOSTS),e)},getCurrent:function(){var e={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:v}};return fetch("".concat(h.ApiBaseURL+h.ApiUrls.CURRENT),e).then((function(e){return e.json()})).then((function(e){return Promise.resolve(e)}))},deleteUser:function(){var e={method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:v}};return fetch("".concat(h.ApiBaseURL+h.ApiUrls.DELETEUSER),e).then((function(e){return e.json()})).then((function(e){return console.log("User deleted"),Promise.resolve(e)}))}};var b=t(12),g=Object(b.a)(),N=t(78),w=function(e){var a=e.component,t=Object(N.a)(e,["component"]);return r.a.createElement(u.b,Object.assign({},t,{render:function(e){return localStorage.getItem("token")?r.a.createElement(a,e):r.a.createElement(u.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},C=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={currentUser:f.currentUser,user:{username:""}},n}return Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;E.getCurrent().then((function(a){e.setState({user:a})}))}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Hello, ",this.state.user.username,"!"),r.a.createElement("h1",null,"Welcome to Kwitter"),r.a.createElement("br",null),r.a.createElement("h2",null,"Posts overview:"),r.a.createElement("form",null,r.a.createElement("label",null,"Name:",r.a.createElement("input",{type:"text",name:"name"})),r.a.createElement("input",{type:"submit",value:"Search"})))}}]),t}(r.a.Component),y=t(36),k=t(65),j=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(o.a)(this,t),n=a.call(this,e),f.currentUserValue&&n.props.history.push("/"),n}return Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Login to Kwitter"),r.a.createElement(y.d,{initialValues:{username:"",password:""},validationSchema:k.a().shape({username:k.b().required("Username is required"),password:k.b().required("Password is required")}),onSubmit:function(a,t){var n=a.username,r=a.password,s=t.setStatus,l=t.setSubmitting;s(),f.login(n,r).then((function(a){var t=(e.props.location.state||{from:{pathname:"/"}}).from;e.props.history.push(t)}),(function(e){l(!1),s(e)}))},render:function(e){var a=e.errors,t=e.status,n=e.touched,s=e.isSubmitting;return r.a.createElement(y.c,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement(y.b,{name:"username",type:"text",className:"form-control"+(a.username&&n.username?" is-invalid":"")}),r.a.createElement(y.a,{name:"username",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement(y.b,{name:"password",type:"password",className:"form-control"+(a.password&&n.password?" is-invalid":"")}),r.a.createElement(y.a,{name:"password",component:"div",className:"invalid-feedback"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:s},"Login")),r.a.createElement("div",null,"Register ",r.a.createElement("a",{href:"/register"},"here")),t&&r.a.createElement("div",{className:"alert alert-danger"},t))}}))}}]),t}(r.a.Component),O=t(13),S=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={user:{username:"",email:"",firstName:"",lastName:"",authorities:[{authority:"",name:""}]},authority:""},n.handleClick=n.handleClick.bind(Object(O.a)(n)),n}return Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;E.getCurrent().then((function(a){e.setState({user:a})}))}},{key:"componentDidMount",value:function(){}},{key:"handleClick",value:function(){E.deleteUser(),localStorage.removeItem("token"),this.props.history.push("/login")}},{key:"render",value:function(){var e=this,a=this.state.user.authorities.map((function(e){return r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",null,e.authority)))}));return r.a.createElement("div",null,r.a.createElement("h1",{className:"Name"},"Profile page"),r.a.createElement("p",{className:"Name"},r.a.createElement("b",null,"Username:")," ",this.state.user.username),r.a.createElement("p",{className:"Email"},r.a.createElement("b",null,"E-mail:")," ",this.state.user.email),r.a.createElement("p",{className:"Firstname"},r.a.createElement("b",null,"First name:")," ",this.state.user.firstName),r.a.createElement("p",{className:"Lastname"},r.a.createElement("b",null,"Last name:")," ",this.state.user.lastName),r.a.createElement("p",{className:"Role"},r.a.createElement("b",null,"Permissions:")," "),r.a.createElement("div",null,a),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("a",{href:"/changepassword"},"Change password"))),r.a.createElement("div",{className:"Delete"},r.a.createElement("button",{onClick:function(){e.handleClick(e.state.user.username)},className:"btn btn-danger"},"Delete account")))}}]),t}(r.a.Component),U=(t(90),t(46)),A=t(50),R=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={user:{username:"",password:"",confirm_password:"",email:"",firstName:"",lastName:""},submitted:!1},n.handleChange=n.handleChange.bind(Object(O.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(O.a)(n)),n}return Object(c.a)(t,[{key:"handleChange",value:function(e){var a=e.target,t=a.name,n=a.value,r=this.state.user;this.setState({user:Object(A.a)(Object(A.a)({},r),{},Object(U.a)({},t,n))})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var a=this.state.user;a.password!==a.confirm_password?alert("Passwords don't match"):a.username&&a.password&&a.email&&a.firstName&&a.lastName&&(f.register(a.username,a.password,a.email,a.firstName,a.lastName),this.props.history.push("/login"))}},{key:"render",value:function(){var e=this.state,a=e.user,t=e.submitted;return r.a.createElement("div",{className:"col-md-6 col-md-offset-3"},r.a.createElement("h2",null,"Register"),r.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"+(t&&!a.username?" has-error":"")},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",className:"form-control",name:"username",value:a.username,onChange:this.handleChange}),t&&!a.username&&r.a.createElement("div",{className:"help-block"},"Username is required")),r.a.createElement("div",{className:"form-group"+(t&&!a.password?" has-error":"")},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:a.password,onChange:this.handleChange}),t&&!a.password&&r.a.createElement("div",{className:"help-block"},"Password is required")),r.a.createElement("div",{className:"form-group"+(t&&!a.confirm_password?" has-error":"")},r.a.createElement("label",{htmlFor:"password"},"Confirm password"),r.a.createElement("input",{type:"password",className:"form-control",name:"confirm_password",value:a.confirm_password,onChange:this.handleChange}),t&&!a.confirm_password&&r.a.createElement("div",{className:"help-block"},"Repeat password is required")),r.a.createElement("div",{className:"form-group"+(t&&!a.email?" has-error":"")},r.a.createElement("label",{htmlFor:"email"},"Email address"),r.a.createElement("input",{type:"text",className:"form-control",name:"email",value:a.email,onChange:this.handleChange}),t&&!a.firstName&&r.a.createElement("div",{className:"help-block"},"Email is required")),r.a.createElement("div",{className:"form-group"+(t&&!a.firstName?" has-error":"")},r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{type:"text",className:"form-control",name:"firstName",value:a.firstName,onChange:this.handleChange}),t&&!a.firstName&&r.a.createElement("div",{className:"help-block"},"First Name is required")),r.a.createElement("div",{className:"form-group"+(t&&!a.lastName?" has-error":"")},r.a.createElement("label",{htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{type:"text",className:"form-control",name:"lastName",value:a.lastName,onChange:this.handleChange}),t&&!a.lastName&&r.a.createElement("div",{className:"help-block"},"Last Name is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},"Register"),r.a.createElement(d.a,{to:"/login",className:"btn btn-link"},"Cancel"))))}}]),t}(r.a.Component),T=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={user:{old_password:"",new_password:"",confirm_password:""},submitted:!1},n.handleChange=n.handleChange.bind(Object(O.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(O.a)(n)),n}return Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;E.getCurrent().then((function(a){e.setState({user:a})}))}},{key:"handleChange",value:function(e){var a=e.target,t=a.name,n=a.value,r=this.state.user;this.setState({user:Object(A.a)(Object(A.a)({},r),{},Object(U.a)({},t,n))})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state,a=e.user,t=e.submitted;return r.a.createElement("div",{className:"col-md-6 col-md-offset-3"},r.a.createElement("h2",null,"Change your password"),r.a.createElement("form",{name:"form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"+(t&&!a.old_password?" has-error":"")},r.a.createElement("label",{htmlFor:"username"},"Old password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:a.old_password,onChange:this.handleChange}),t&&!a.old_password&&r.a.createElement("div",{className:"help-block"},"Old password required")),r.a.createElement("div",{className:"form-group"+(t&&!a.password?" has-error":"")},r.a.createElement("label",{htmlFor:"password"},"New password"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:a.new_password,onChange:this.handleChange}),t&&!a.new_password&&r.a.createElement("div",{className:"help-block"},"New password is required")),r.a.createElement("div",{className:"form-group"+(t&&!a.confirm_password?" has-error":"")},r.a.createElement("label",{htmlFor:"password"},"Confirm password"),r.a.createElement("input",{type:"password",className:"form-control",name:"confirm_password",value:a.confirm_password,onChange:this.handleChange}),t&&!a.confirm_password&&r.a.createElement("div",{className:"help-block"},"Repeat password is required")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary"},"Change password"))))}}]),t}(r.a.Component),P=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={},n.handleChange=n.handleChange.bind(Object(O.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(O.a)(n)),n}return Object(c.a)(t,[{key:"componentWillMount",value:function(){}},{key:"handleChange",value:function(){}},{key:"handleSubmit",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("h1",null,"Create")}}]),t}(r.a.Component),L=function(e){Object(m.a)(t,e);var a=Object(i.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={currentUser:null},n}return Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.title="Kwitter",f.currentUser.subscribe((function(a){return e.setState({currentUser:a})}))}},{key:"logout",value:function(){localStorage.removeItem("token"),f.currentUser.next(!1),g.push("/login")}},{key:"render",value:function(){return r.a.createElement(u.c,{history:g},r.a.createElement("div",null,localStorage.getItem("token")&&r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},r.a.createElement("div",{className:"navbar-nav"},r.a.createElement(d.a,{to:"/",className:"nav-item nav-link"},"Home"),r.a.createElement(d.a,{to:"/profile",className:"nav-item nav-link"},"Profile"),r.a.createElement(d.a,{to:"/createpost",className:"nav-item nav-link"},"Create Post"),r.a.createElement("a",{onClick:this.logout,className:"nav-item nav-link"},"Logout"))),r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement(u.d,null,r.a.createElement(w,{exact:!0,path:"/",component:C}),r.a.createElement(w,{exact:!0,path:"/profile",component:S}),r.a.createElement(w,{exact:!0,path:"/changepassword",component:T}),r.a.createElement(w,{exact:!0,path:"/createpost",component:P}),r.a.createElement(u.b,{path:"/login",component:j}),r.a.createElement(u.b,{path:"/register",component:R}))))))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[79,1,2]]]);
//# sourceMappingURL=main.e5d9149b.chunk.js.map